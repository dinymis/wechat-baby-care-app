<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- æœç´¢æ  -->
    <view class="search-bar" bindtap="onSearchTap">
      <view class="search-input">
        <text class="search-icon">ğŸ”</text>
        <text class="search-placeholder">æœç´¢è‚²å„¿çŸ¥è¯†...</text>
      </view>
    </view>

    <!-- è½®æ’­å›¾ -->
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="3000" duration="500">
      <block wx:for="{{banners}}" wx:key="id" wx:for-item="item">
        <swiper-item>
          <view class="banner-item" bindtap="onBannerTap" data-link="{{item.link}}">
            <image class="banner-image" src="{{item.image}}" mode="aspectFill"></image>
            <view class="banner-content">
              <text class="banner-title">{{item.title}}</text>
            </view>
          </view>
        </swiper-item>
      </block>
    </swiper>

    <!-- åˆ†ç±»å¯¼èˆª -->
    <view class="category-section">
      <view class="section-header">
        <text class="section-title">çƒ­é—¨åˆ†ç±»</text>
        <text class="more-btn" bindtap="onCategoryTap">æ›´å¤š ></text>
      </view>
      <scroll-view class="category-tabs" 
                   scroll-x="true" 
                   show-scrollbar="{{false}}" 
                   scroll-left="0"
                   enable-flex="true"
                   scroll-with-animation="true"
                   bindscroll="onCategoryScroll">
        <view class="category-tab-list">
          <block wx:for="{{categories}}" wx:key="id" wx:for-item="category">
            <view class="category-tab-item {{selectedCategoryId === category.id ? 'selected' : ''}}" 
                  bindtap="onCategoryTabTap" 
                  data-category="{{category}}">
              <text class="category-icon">{{category.icon}}</text>
              <text class="category-tab-name">{{category.name}}</text>
            </view>
          </block>
        </view>
      </scroll-view>
    </view>

    <!-- åˆ†ç±»æ–‡ç« å±•ç¤ºåŒºåŸŸ -->
    <view class="category-articles-section" wx:if="{{selectedCategoryArticles.length > 0}}">
      <view class="section-header">
        <text class="section-title">{{selectedCategoryName}}æ–‡ç« </text>
        <text class="more-btn" bindtap="onViewMoreCategoryArticles">æ›´å¤š ></text>
      </view>
      <view class="articles-list">
        <block wx:for="{{selectedCategoryArticles}}" wx:key="id" wx:for-item="article">
          <view class="article-item" bindtap="onArticleTap" data-id="{{article.id}}">
            <image class="article-cover" src="{{article.coverImage}}" mode="aspectFill"></image>
            <view class="article-content">
              <text class="article-title">{{article.title}}</text>
              <text class="article-summary">{{article.summary}}</text>
              <view class="article-meta">
                <text class="article-author">{{article.author}}</text>
                <text class="article-time">{{article.publishTime}}</text>
                <text class="article-read-time">{{article.readTime}}åˆ†é’Ÿ</text>
                <text class="article-read-count">{{article.readCount}}é˜…è¯»</text>
                <text class="article-free" wx:if="{{article.isFree}}">å…è´¹</text>
              </view>
              <view class="article-tags">
                <block wx:for="{{article.tags}}" wx:key="*this" wx:for-item="tag">
                  <text class="tag">{{tag}}</text>
                </block>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>

    <!-- æ¨èä¸“æ  -->
    <view class="columns-section">
      <view class="section-header">
        <text class="section-title">æ¨èä¸“æ </text>
        <text class="more-btn" bindtap="onViewMoreColumns">æ›´å¤š ></text>
      </view>
      <view class="columns-list">
        <block wx:for="{{columns}}" wx:key="id" wx:for-item="column">
          <view class="column-item" bindtap="onColumnTap" data-id="{{column.id}}">
            <image class="column-cover" src="{{column.coverImage}}" mode="aspectFill"></image>
            <view class="column-content">
              <text class="column-title">{{column.title}}</text>
              <text class="column-description">{{column.description}}</text>
              <view class="column-meta">
                <text class="column-author">{{column.author}}</text>
                <text class="column-stats">{{column.articleCount}}ç¯‡æ–‡ç«  Â· {{column.readCount}}é˜…è¯»</text>
              </view>
              <view class="column-tags">
                <block wx:for="{{column.tags}}" wx:key="*this" wx:for-item="tag">
                  <text class="tag">{{tag}}</text>
                </block>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>
  </view>
</scroll-view>